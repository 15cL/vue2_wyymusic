"use strict";(self["webpackChunkvue2_wyymusic"]=self["webpackChunkvue2_wyymusic"]||[]).push([[143],{8167:function(t,s,i){i.d(s,{A:function(){return u}});var n=function(){var t=this,s=t._self._c;return s("div",{class:[t.colorY?"active":"","comment_list"]},[s("div",{staticClass:"content"},[s("ul",t._l(t.comments,(function(i){return s("li",{key:i.commentId},[s("div",{staticClass:"pic"},[s("img",{attrs:{src:i.user.avatarUrl,alt:""}})]),s("div",{staticClass:"comment"},[s("div",{staticClass:"up"},[s("div",{staticClass:"user"},[s("div",{staticClass:"name"},[s("div",{staticClass:"nickname"},[t._v(t._s(i.user.nickname))]),i.user.vipRights?.associator?.iconUrl?s("div",{staticClass:"icon"},[t._v("  "),s("img",{attrs:{src:i.user.vipRights?.associator?.iconUrl,alt:""}})]):t._e()]),s("div",{staticClass:"time"},[t._v(" "+t._s(t.fomateDate(i.time,!0))+" ")])]),s("div",{staticClass:"zan"},[s("span",{staticClass:"num"},[t._v(t._s(i.likedCount))]),s("span",{staticClass:"iconfont icon-zan zanicon"})])]),i.beReplied.length?s("div",{staticClass:"downRe down"},[s("div",{staticClass:"re"},[t._v(" 回复 "),s("span",[t._v("@"+t._s(i.beReplied[0].user.nickname)+"： ")]),t._v(" "+t._s(i.content)+" ")]),s("div",{staticClass:"origin"},[t._v(" @"+t._s(i.beReplied[0].user.nickname)+t._s(i.beReplied[0].content)+" ")])]):s("div",{staticClass:"down"},[t._v(" "+t._s(i.content)+" ")])])])})),0)])])},e=[],a=i(6925),l={props:{comments:{type:Array},colorY:{type:Boolean,default:!1}},methods:{fomateDate(t,s){return(0,a.pp)(t,s)}}},c=l,o=i(1656),r=(0,o.A)(c,n,e,!1,null,"fdae43be",null),u=r.exports},9628:function(t,s,i){i.d(s,{A:function(){return r}});var n=function(){var t=this,s=t._self._c;return s("div",{staticClass:"nav_box",class:t.colorY?"active":""},[s("van-tabs",{attrs:{"title-active-color":"red","line-width":t.wd,scrollspy:t.isScrollspy},on:{click:t.onClickTab}},t._l(t.navs,(function(i,n){return s("van-tab",{key:n,attrs:{title:i}},[t._t(t.isScrollspy?`slot-${n}`:"home",null,{index:n,isDestory:t.selectIndex==n})],2)})),1)],1)},e=[],a={name:"NavBox",props:{navs:{type:Array,default:()=>["推荐音乐","热歌榜","搜索"]},colorY:{type:Boolean,default:!1},isScrollspy:{type:Boolean,default:!1}},data(){return{wd:77,selectIndex:""}},methods:{onClickTab(t){this.selectIndex=t}}},l=a,c=i(1656),o=(0,c.A)(l,n,e,!1,null,"61dc57e8",null),r=o.exports},9524:function(t,s,i){i.r(s),i.d(s,{default:function(){return p}});var n=function(){var t=this,s=t._self._c;return s("div",{staticClass:"player"},[t._m(0),s("div",{staticClass:"scroll",style:t.bgColor},[s("div",{staticClass:"play_box"},[s("div",{staticClass:"outer_box"},[s("div",{staticClass:"border_box",class:t.play?"animation1":"animation2"},[s("div",{staticClass:"pic_box"},[s("img",{attrs:{src:t.currentPlayMsg.url}})])]),s("div",{staticClass:"lyric_control"},[s("div",{staticClass:"lyric"},[s("ul",{ref:"lyc_srol"},t._l(t.lyrics,(function(i){return s("li",{key:i.uid,style:{color:t.selectIndex==i.uid?"white":""}},[t._v(" "+t._s(i.lyc)+" ")])})),0)]),s("div",{staticClass:"control"},[s("div",{staticClass:"like"},[s("span",{staticClass:"iconfont icon-aixin",on:{click:t.downloadApp}})]),s("div",{staticClass:"changeOp"},[t.play?s("span",{staticClass:"iconfont icon-zanting",on:{click:function(s){t.play=!t.play}}}):s("span",{staticClass:"iconfont icon-bofang1",on:{click:function(s){t.play=!t.play}}})]),s("div",{staticClass:"commit"},[s("span",{staticClass:"iconfont icon-pinglun",on:{click:t.downloadApp}})])])])])]),s("div",{staticClass:"openWithDold"},[s("div",{staticClass:"dold",on:{click:t.downloadApp}},[t._v("下载")]),s("div",{staticClass:"open",on:{click:t.downloadApp}},[t._v("打开")])]),s("NavBox",{attrs:{navs:["评论","相似歌曲","相似歌单"],colorY:!0,isScrollspy:!0},scopedSlots:t._u([{key:"slot-0",fn:function(i){return[t.comments.length?s("div",{staticClass:"comment"},[s("div",{staticClass:"title"},[t._v("精彩评论")]),s(t.taps[i.index],{tag:"component",attrs:{comments:t.comments,colorY:!0}}),s("div",{staticClass:"moreComment",staticStyle:{padding:"0 35vw"}},[s("span",{staticStyle:{display:"block",padding:"5px 8px",color:"#ffffffcc","font-size":"12px","text-align":"center","background-color":"hsla(0, 0%, 100%, 0.06)",border:"1px solid hsla(0, 0%, 100%, 0.06)","border-radius":"20px"}},[t._v("更多精彩评论")])])],1):t._e()]}},{key:"slot-1",fn:function(){return[s("div",{staticClass:"title"},[t._v("和这首歌相似的歌曲")]),s("div",{staticClass:"scroll_view"},[s("ul",t._l(t.simiSongs,(function(i,n){return s("li",{key:n,on:{click:function(s){t.toPlay(i.id,i.album?.picUrl,i.name,t.artistsFilter(i.artists))}}},[s("div",{staticClass:"pic"},[s("img",{attrs:{src:i.album.picUrl}})]),s("div",{staticClass:"left"},[s("div",{staticClass:"name"},[t._v(" "+t._s(i.name)+" ")]),s("div",{staticClass:"art"},[s("span",{staticClass:"iconfont icon-sq",staticStyle:{color:"orange"}}),t._v(" "+t._s(t.artistsFilter(i.artists))+" - "+t._s(i.album.name)+" ")])])])})),0)])]},proxy:!0},{key:"slot-2",fn:function(){return[s("div",{staticClass:"title"},[t._v("相似歌单")]),s("ul",{staticClass:"content",style:t.simiList.length>1?"justify-content: space-around;":""},t._l(t.simiList,(function(i){return s("li",{key:i.id,on:{click:function(s){return t.toList(i.id)}}},[s("img",{attrs:{src:i.coverImgUrl}}),s("div",{staticClass:"listTltle"},[t._v(t._s(i.name))])])})),0)]},proxy:!0}])})],1),t.songUrl?s("audio",{ref:"player",attrs:{src:t.songUrl},on:{timeupdate:t.getTime,ended:t.ended}}):t._e()])},e=[function(){var t=this,s=t._self._c;return s("header",[s("div",{staticClass:"pic"},[s("div",{staticClass:"bigC"},[s("span",{staticClass:"iconfont icon-wangyiyunyinleclick"})])]),s("div",{staticClass:"text"},[s("div",{staticClass:"to"},[t._v("网易云音乐")]),s("div",{staticClass:"tw"},[t._v("去云音乐，看更多走心评论")])]),s("div",{staticClass:"btn"},[s("span",[t._v("立即体验")])])])}],a=(i(4114),i(9628)),l=i(8167),c=i(3518),o=i(6925),r={components:{NavBox:a.A,CommentList:l.A},data(){return{colorNum:"",songUrl:"",lyrics:"",play:!1,selectIndex:2,top:0,comments:[],taps:["CommentList","SimiSong","SimiList"],simiSongs:[],simiList:[]}},watch:{play(t,s){t?this.$refs.player.play():this.$refs.player.pause()}},async created(){const t=await this.geturlMsg(this.$route.query.id);this.colorNum=String(t.size).slice(0,6),this.songUrl=t.url,this.lyrics=await this.getLyrics(this.$route.query.id);const s=await this.getSongComments(this.$route.query.id);this.comments=s.data.hotComments;const i=await this.getSongSimi(this.$route.query.id);this.simiSongs=i.data.songs;const n=await this.getListSimi(this.$route.query.id);this.simiList=n.data.playlists,console.log(this.simiList)},computed:{...(0,c.aH)(["currentPlayMsg"]),bgColor(){return` background: linear-gradient(#${this.colorNum}, rgb(46, 6, 5))`}},methods:{...(0,c.PY)(["setCurrentPlayPic"]),...(0,c.i0)("player",["getSongUrl","getSongLyric","getSongComments","getSongSimi","getListSimi"]),artistsFilter(t){return(0,o.tW)(t)},async getLyrics(t){const s=await this.getSongLyric(t),i=s.data.lrc.lyric;let n=(0,o.MM)(i);return n instanceof Array===!1&&(n=[{lyc:"当前音乐无歌词显示",uid:2,time:""}]),n.unshift({lyc:this.currentPlayMsg.ar,uid:1,time:""}),n.unshift({lyc:this.currentPlayMsg.name,uid:0,time:""}),n},async geturlMsg(t){const s=await this.getSongUrl(t);return s.data.data[0]},getTime(t){const s=t.srcElement.currentTime,i=this.$refs.lyc_srol.getElementsByTagName("li")[this.selectIndex-1].clientHeight;s>this.lyrics[this.selectIndex+1].time&&this.$nextTick((()=>{this.selectIndex+=1,this.top-=i,this.$refs.lyc_srol.style.transform=`translateY(${this.top}px)`}))},ended(t){t.srcElement.ended&&(this.selectIndex=2,this.top=0,this.$refs.lyc_srol.style.transform="translateY(0px)",this.play=!1)},toPlay(t,s,i,n){this.$router.push({path:"/player",query:{id:t}}),this.setCurrentPlayPic({url:s,name:i,ar:n})},toList(t){this.$router.push({path:"/playlist",query:{id:t}})},downloadApp(){location.assign("https://m.music.163.com/m/applink/?scheme=orpheus%3A%2F%2Fopenurl")}}},u=r,d=i(1656),m=(0,d.A)(u,n,e,!1,null,"a6b21be2",null),p=m.exports},6925:function(t,s,i){i.d(s,{MM:function(){return a},pp:function(){return n},tW:function(){return e}});const n=(t,s=!1)=>{if(!t)return!1;const i=new Date(t),n=i.getFullYear(),e=i.getMonth()+1,a=i.getDate();return s?n+"年"+e+"月"+a+"日":e+"月"+a+"日"},e=t=>{let s="";return 1===t.length?t[0].name:(t.forEach(((i,n)=>{n<t.length-1?s+=i.name+" / ":s+=i.name})),s)},a=function(t){const s=/\n/,i=t.split(s);return l(i)};function l(t){const s=/\[\d{2}:\d{2}.\d{2,3}\]/;return t.map(((t,i)=>{if(""===t)return{};const n=t.match(s);if(!n[0])return!1;const e=String(t.split("]")[1]).trim();return{time:n[0]?c(n[0]):"",lyc:e,uid:i+2}}))}function c(t){const s=t.slice(1,t.length-1),i=/.*:/,n=/:.*\./,e=/\..*/,a=parseInt(s.match(i)[0].slice(0,2));let l=parseInt(s.match(n)[0].slice(1,3));const c=parseInt(s.match(e)[0].slice(1));return a&&(l+=60*a),`${l}.${c}`}}}]);
//# sourceMappingURL=143.84f8de30.js.map